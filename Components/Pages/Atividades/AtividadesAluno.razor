@page "/atividades/aluno"

<div class="page-container">

    <h1 class="title">Área do Aluno</h1>

    <EditForm Model="@filtro" OnValidSubmit="@AplicarFiltro">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <!-- FILTRO DE MATÉRIA -->
        <div class="filter-panel">
            <label>Filtrar por Matéria</label>
            <InputSelect @bind-Value="filtro.MateriaSelecionada">
                <option value="">Todas</option>
                @foreach (var materia in Materias)
                {
                    <option>@materia</option>
                }
            </InputSelect>

            <button type="submit" class="btn-filtro">Aplicar Filtro</button>
        </div>
    </EditForm>

    <div class="panels-container">

        <!-- ATIVIDADES PENDENTES -->
        <div class="panel">
            <h2>Atividades Pendentes</h2>

            @foreach (var atv in AtividadesPendentes
                .Where(a => string.IsNullOrEmpty(filtro.MateriaSelecionada) || a.Materia == filtro.MateriaSelecionada))
            {
                <div class="atividade-card">
                    <h3>@atv.Titulo</h3>
                    <p>Matéria: @atv.Materia</p>
                    <a href="/atividades/realizar/@atv.Id" class="btn-realizar">Realizar</a>
                </div>
            }

            @if (!AtividadesPendentes.Any())
            {
                <p>Nenhuma atividade pendente.</p>
            }
        </div>

        <!-- ATIVIDADES FEITAS -->
        <div class="panel">
            <h2>Atividades Feitas</h2>

            @foreach (var atv in AtividadesFeitas)
            {
                <div class="atividade-card">
                    <h3>@atv.Titulo</h3>
                    <p>Matéria: @atv.Materia</p>
                    <p>Nota: <b>@atv.Nota</b></p>
                </div>
            }

            @if (!AtividadesFeitas.Any())
            {
                <p>Nenhuma atividade feita.</p>
            }
        </div>

    </div>
</div>

@code{

}